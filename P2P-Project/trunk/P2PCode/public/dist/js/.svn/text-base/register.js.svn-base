$(function(){$("#myform").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证未通过",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"用户名长度在6~18位之间"},regexp:{regexp:/^[a-zA-Z0-9_]+$/,message:"用户名只能是大小写字母、数字、下划线"}}},inputPassword1:{validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:18,message:"密码长度在6~18位之间"}}},inputPassword2:{validators:{notEmpty:{message:"确认密码不能为空"},identical:{field:"inputPassword1",message:"两次输入的密码不一致"}}}}}).on("success.form.bv",function(s){s.preventDefault();var a=$(s.target),e=(a.data("bootstrapValidator"),a.serialize());$.post("/users/join",e,function(s){if(s.isSuccess){var a=6,e='<span class="glyphicon glyphicon-ok"></span>注册成功，等待<span id="count">'+a+"</span>秒跳转到登陆页面";$("#registerTips .modal-body").html(e);var n=setInterval(function(){var s='<span class="glyphicon glyphicon-ok"></span>注册成功，等待<span id="count">'+a+"</span>秒跳转到登陆页面";$("#registerTips .modal-body").html(s),-1==--a&&(clearInterval(n),location.href="/login.html")},1e3)}else{e='<span class="glyphicon glyphicon-remove"></span>注册失败，请核实';$("#registerTips .modal-body").html(e)}$("#registerTips").modal("show")},"json")}),$("#loginform").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证未通过",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"用户名长度在6~18位之间"},regexp:{regexp:/^[a-zA-Z0-9_]+$/,message:"用户名只能是大小写字母、数字、下划线"}}},inputPassword1:{validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:18,message:"密码长度在6~18位之间"}}}}}).on("success.form.bv",function(s){s.preventDefault();var a=$(s.target),e=(a.data("bootstrapValidator"),a.serialize());$.post("/users/login",e,function(s){if(s.isSuccess){var a=6,e='<span class="glyphicon glyphicon-ok"></span>登陆成功，等待<span id="count">'+a+"</span>秒跳转到会员中心页面";$("#loginTips .modal-body").html(e);var n=setInterval(function(){var s='<span class="glyphicon glyphicon-ok"></span>登陆成功，等待<span id="count">'+a+"</span>秒跳转到会员中心页面";$("#loginTips .modal-body").html(s),-1==--a&&(clearInterval(n),location.href="/memberCenter.html")},1e3)}else{e='<span class="glyphicon glyphicon-remove"></span>登陆失败，请核实用户名和密码';$("#loginTips .modal-body").html(e)}$("#loginTips").modal("show")},"json")})});